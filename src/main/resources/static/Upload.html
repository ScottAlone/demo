<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/jquery.js"></script>
</head>
<body>
<form method="post" enctype="multipart/form-data">
    <label for="file">请选择文件：</label><input id="file" type="file">
    <label for="tags">标签：</label><input id="tags" type="text">
    <label for="city_id">城市id：</label><input id="city_id" type="number">
    <label for="customer_id">客户id：</label><input id="customer_id" type="number">
    <button id="submit">提交</button>
</form>
</body>
<script>
    $(':file').change(function(){
        var file = this.files[0];
        name = file.name;
        size = file.size;
        type = file.type;
        //your validation
    });
    $("#submit").click(function () {
        var o = $("#file");
        var formData = new FormData($('form')[0]);
        $.ajax({
            url: "/files",
            type: 'POST',
            xhr: function() {  // custom xhr
                myXhr = $.ajaxSettings.xhr();
                if(myXhr.upload){ // check if upload property exists
                    myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
                }
                return myXhr;
            },
            data:{
                customerId: $("#customer_id").val(),
                cityId: $("#city_id").val(),
                tags: $("#tags").val(),
                file: formData,
                cache: false,
                contentType: false,
                processData: false
            },
            context: document.body,
            success: function(data, statusText, xhr){
                if (data.code == 200){
                    alert("上传成功！");
                }else alert(data.message);
            }
        });
    });
</script>
</html>